include(BCMTest)
workspace_src (${CMAKE_CURRENT_SOURCE_DIR} CMAKE_WORKSPACE_SOURCE)


bcm_test_link_libraries(${CMAKE_WORKSPACE_NAME}_asio
                        )

#
# Copyright (c) 2003-2017 Christopher M. Kohlhoff (chris at kohlhoff dot com)
#
# Distributed under the Boost Software License, Version 1.0. (See accompanying
# file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
#

# TODO: Add select versions

bcm_test(NAME asio_test_basic_datagram_socket SOURCES ${CMAKE_WORKSPACE_SOURCE}/basic_datagram_socket.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_basic_deadline_timer SOURCES ${CMAKE_WORKSPACE_SOURCE}/basic_deadline_timer.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_basic_raw_socket SOURCES ${CMAKE_WORKSPACE_SOURCE}/basic_raw_socket.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_basic_seq_packet_socket SOURCES ${CMAKE_WORKSPACE_SOURCE}/basic_seq_packet_socket.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_basic_signal_set SOURCES ${CMAKE_WORKSPACE_SOURCE}/basic_signal_set.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_basic_socket_acceptor SOURCES ${CMAKE_WORKSPACE_SOURCE}/basic_socket_acceptor.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_basic_stream_socket SOURCES ${CMAKE_WORKSPACE_SOURCE}/basic_stream_socket.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_basic_streambuf SOURCES ${CMAKE_WORKSPACE_SOURCE}/basic_streambuf.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_basic_waitable_timer SOURCES ${CMAKE_WORKSPACE_SOURCE}/basic_waitable_timer.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_buffer SOURCES ${CMAKE_WORKSPACE_SOURCE}/buffer.cpp)
bcm_test(NAME asio_test_buffer_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/buffer.cpp)
bcm_test(NAME asio_test_buffered_read_stream SOURCES ${CMAKE_WORKSPACE_SOURCE}/buffered_read_stream.cpp)
bcm_test(NAME asio_test_buffered_read_stream_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/buffered_read_stream.cpp)
bcm_test(NAME asio_test_buffered_stream SOURCES ${CMAKE_WORKSPACE_SOURCE}/buffered_stream.cpp)
bcm_test(NAME asio_test_buffered_stream_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/buffered_stream.cpp)
bcm_test(NAME asio_test_buffered_write_stream SOURCES ${CMAKE_WORKSPACE_SOURCE}/buffered_write_stream.cpp)
bcm_test(NAME asio_test_buffered_write_stream_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/buffered_write_stream.cpp)
bcm_test(NAME asio_test_buffers_iterator SOURCES ${CMAKE_WORKSPACE_SOURCE}/buffers_iterator.cpp)
bcm_test(NAME asio_test_buffers_iterator_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/buffers_iterator.cpp)
bcm_test(NAME asio_test_completion_condition SOURCES ${CMAKE_WORKSPACE_SOURCE}/completion_condition.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_connect SOURCES ${CMAKE_WORKSPACE_SOURCE}/connect.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_coroutine SOURCES ${CMAKE_WORKSPACE_SOURCE}/coroutine.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_datagram_socket_service SOURCES ${CMAKE_WORKSPACE_SOURCE}/datagram_socket_service.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_deadline_timer_service SOURCES ${CMAKE_WORKSPACE_SOURCE}/deadline_timer_service.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_deadline_timer SOURCES ${CMAKE_WORKSPACE_SOURCE}/deadline_timer.cpp)
bcm_test(NAME asio_test_deadline_timer_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/deadline_timer.cpp)
bcm_test(NAME asio_test_asio_error SOURCES ${CMAKE_WORKSPACE_SOURCE}/error.cpp)
bcm_test(NAME asio_test_error_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/error.cpp)
bcm_test(NAME asio_test_generic_basic_endpoint SOURCES ${CMAKE_WORKSPACE_SOURCE}/generic/basic_endpoint.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_generic_datagram_protocol SOURCES ${CMAKE_WORKSPACE_SOURCE}/generic/datagram_protocol.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_generic_raw_protocol SOURCES ${CMAKE_WORKSPACE_SOURCE}/generic/raw_protocol.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_generic_seq_packet_protocol SOURCES ${CMAKE_WORKSPACE_SOURCE}/generic/seq_packet_protocol.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_generic_stream_protocol SOURCES ${CMAKE_WORKSPACE_SOURCE}/generic/stream_protocol.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_high_resolution_timer SOURCES ${CMAKE_WORKSPACE_SOURCE}/high_resolution_timer.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_io_service SOURCES ${CMAKE_WORKSPACE_SOURCE}/io_service.cpp)
bcm_test(NAME asio_test_io_service_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/io_service.cpp)
bcm_test(NAME asio_test_ip_address SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/address.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_ip_address_v4 SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/address_v4.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_ip_address_v6 SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/address_v6.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_ip_basic_endpoint SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/basic_endpoint.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_ip_basic_resolver SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/basic_resolver.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_ip_basic_resolver_entry SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/basic_resolver_entry.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_ip_basic_resolver_iterator SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/basic_resolver_iterator.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_ip_basic_resolver_query SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/basic_resolver_query.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_ip_host_name SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/host_name.cpp)
bcm_test(NAME asio_test_ip_host_name_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/host_name.cpp)
bcm_test(NAME asio_test_ip_icmp SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/icmp.cpp)
bcm_test(NAME asio_test_ip_icmp_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/icmp.cpp)
bcm_test(NAME asio_test_ip_multicast SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/multicast.cpp)
bcm_test(NAME asio_test_ip_multicast_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/multicast.cpp)
bcm_test(NAME asio_test_ip_resolver_query_base SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/resolver_query_base.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_ip_resolver_service SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/resolver_service.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_ip_tcp SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/tcp.cpp)
bcm_test(NAME asio_test_ip_tcp_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/tcp.cpp)
bcm_test(NAME asio_test_ip_udp SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/udp.cpp)
bcm_test(NAME asio_test_ip_udp_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/udp.cpp)
bcm_test(NAME asio_test_ip_unicast SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/unicast.cpp)
bcm_test(NAME asio_test_ip_unicast_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/unicast.cpp)
bcm_test(NAME asio_test_ip_v6_only SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/v6_only.cpp)
bcm_test(NAME asio_test_ip_v6_only_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/ip/v6_only.cpp)
bcm_test(NAME asio_test_is_read_buffered SOURCES ${CMAKE_WORKSPACE_SOURCE}/is_read_buffered.cpp)
bcm_test(NAME asio_test_is_read_buffered_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/is_read_buffered.cpp)
bcm_test(NAME asio_test_is_write_buffered SOURCES ${CMAKE_WORKSPACE_SOURCE}/is_write_buffered.cpp)
bcm_test(NAME asio_test_is_write_buffered_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/is_write_buffered.cpp)
bcm_test(NAME asio_test_local_basic_endpoint SOURCES ${CMAKE_WORKSPACE_SOURCE}/local/basic_endpoint.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_local_connect_pair SOURCES ${CMAKE_WORKSPACE_SOURCE}/local/connect_pair.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_local_datagram_protocol SOURCES ${CMAKE_WORKSPACE_SOURCE}/local/datagram_protocol.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_local_stream_protocol SOURCES ${CMAKE_WORKSPACE_SOURCE}/local/stream_protocol.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_placeholders SOURCES ${CMAKE_WORKSPACE_SOURCE}/placeholders.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_posix_basic_descriptor SOURCES ${CMAKE_WORKSPACE_SOURCE}/posix/basic_descriptor.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_posix_basic_stream_descriptor SOURCES ${CMAKE_WORKSPACE_SOURCE}/posix/basic_stream_descriptor.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_posix_descriptor_base SOURCES ${CMAKE_WORKSPACE_SOURCE}/posix/descriptor_base.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_posix_stream_descriptor SOURCES ${CMAKE_WORKSPACE_SOURCE}/posix/stream_descriptor.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_posix_stream_descriptor_service SOURCES ${CMAKE_WORKSPACE_SOURCE}/posix/stream_descriptor_service.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_raw_socket_service SOURCES ${CMAKE_WORKSPACE_SOURCE}/raw_socket_service.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_read SOURCES ${CMAKE_WORKSPACE_SOURCE}/read.cpp)
bcm_test(NAME asio_test_read_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/read.cpp)
bcm_test(NAME asio_test_read_at SOURCES ${CMAKE_WORKSPACE_SOURCE}/read_at.cpp)
bcm_test(NAME asio_test_read_at_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/read_at.cpp)
bcm_test(NAME asio_test_read_until SOURCES ${CMAKE_WORKSPACE_SOURCE}/read_until.cpp)
bcm_test(NAME asio_test_read_until_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/read_until.cpp)
bcm_test(NAME asio_test_seq_packet_socket_service SOURCES ${CMAKE_WORKSPACE_SOURCE}/seq_packet_socket_service.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_signal_set SOURCES ${CMAKE_WORKSPACE_SOURCE}/signal_set.cpp)
bcm_test(NAME asio_test_signal_set_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/signal_set.cpp)
bcm_test(NAME asio_test_signal_set_service SOURCES ${CMAKE_WORKSPACE_SOURCE}/signal_set_service.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_socket_acceptor_service SOURCES ${CMAKE_WORKSPACE_SOURCE}/socket_acceptor_service.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_socket_base SOURCES ${CMAKE_WORKSPACE_SOURCE}/socket_base.cpp)
bcm_test(NAME asio_test_socket_base_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/socket_base.cpp)
bcm_test(NAME asio_test_steady_timer SOURCES ${CMAKE_WORKSPACE_SOURCE}/steady_timer.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_strand SOURCES ${CMAKE_WORKSPACE_SOURCE}/strand.cpp)
bcm_test(NAME asio_test_strand_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/strand.cpp)
bcm_test(NAME asio_test_stream_socket_service SOURCES ${CMAKE_WORKSPACE_SOURCE}/stream_socket_service.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_streambuf SOURCES ${CMAKE_WORKSPACE_SOURCE}/streambuf.cpp)
bcm_test(NAME asio_test_streambuf_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/streambuf.cpp)
bcm_test(NAME asio_test_system_timer SOURCES ${CMAKE_WORKSPACE_SOURCE}/system_timer.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_time_traits SOURCES ${CMAKE_WORKSPACE_SOURCE}/time_traits.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_wait_traits SOURCES ${CMAKE_WORKSPACE_SOURCE}/wait_traits.cpp COMPILE_ONLY)
bcm_test(NAME asio_test_waitable_timer_service SOURCES ${CMAKE_WORKSPACE_SOURCE}/waitable_timer_service.cpp COMPILE_ONLY)
if(WIN32)
    bcm_test(NAME asio_test_windows/basic_handle SOURCES ${CMAKE_WORKSPACE_SOURCE}/windows/basic_handle.cpp COMPILE_ONLY)
    bcm_test(NAME asio_test_windows/basic_object_handle SOURCES ${CMAKE_WORKSPACE_SOURCE}/windows/basic_object_handle.cpp COMPILE_ONLY)
    bcm_test(NAME asio_test_windows/basic_random_access_handle SOURCES ${CMAKE_WORKSPACE_SOURCE}/windows/basic_random_access_handle.cpp COMPILE_ONLY)
    bcm_test(NAME asio_test_windows/basic_stream_handle SOURCES ${CMAKE_WORKSPACE_SOURCE}/windows/basic_stream_handle.cpp COMPILE_ONLY)
    bcm_test(NAME asio_test_windows/object_handle SOURCES ${CMAKE_WORKSPACE_SOURCE}/windows/object_handle.cpp COMPILE_ONLY)
    bcm_test(NAME asio_test_windows/object_handle_service SOURCES ${CMAKE_WORKSPACE_SOURCE}/windows/object_handle_service.cpp COMPILE_ONLY)
    bcm_test(NAME asio_test_windows/overlapped_ptr SOURCES ${CMAKE_WORKSPACE_SOURCE}/windows/overlapped_ptr.cpp COMPILE_ONLY)
    bcm_test(NAME asio_test_windows/random_access_handle SOURCES ${CMAKE_WORKSPACE_SOURCE}/windows/random_access_handle.cpp COMPILE_ONLY)
    bcm_test(NAME asio_test_windows/random_access_handle_service SOURCES ${CMAKE_WORKSPACE_SOURCE}/windows/random_access_handle_service.cpp COMPILE_ONLY)
    bcm_test(NAME asio_test_windows/stream_handle SOURCES ${CMAKE_WORKSPACE_SOURCE}/windows/stream_handle.cpp COMPILE_ONLY)
    bcm_test(NAME asio_test_windows/stream_handle_service SOURCES ${CMAKE_WORKSPACE_SOURCE}/windows/stream_handle_service.cpp COMPILE_ONLY)
endif()
bcm_test(NAME asio_test_write SOURCES ${CMAKE_WORKSPACE_SOURCE}/write.cpp)
bcm_test(NAME asio_test_write_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/write.cpp)
bcm_test(NAME asio_test_write_at SOURCES ${CMAKE_WORKSPACE_SOURCE}/write_at.cpp)
bcm_test(NAME asio_test_write_at_select SOURCES ${CMAKE_WORKSPACE_SOURCE}/write_at.cpp)

if(OpenSSL_FOUND)
    bcm_test(NAME asio_test_asio_test_basic_context SOURCES ${CMAKE_WORKSPACE_SOURCE}/ssl/basic_context.cpp COMPILE_ONLY)
    bcm_test(NAME asio_test_asio_test_context_base SOURCES ${CMAKE_WORKSPACE_SOURCE}/ssl/context_base.cpp COMPILE_ONLY)
    bcm_test(NAME asio_test_asio_test_context_service SOURCES ${CMAKE_WORKSPACE_SOURCE}/ssl/context_service.cpp COMPILE_ONLY)
    bcm_test(NAME asio_test_asio_test_context SOURCES ${CMAKE_WORKSPACE_SOURCE}/ssl/context.cpp COMPILE_ONLY)
#    bcm_test(NAME asio_test_asio_test_asio_ssl_error SOURCES ${CMAKE_WORKSPACE_SOURCE}/ssl/error.cpp COMPILE_ONLY)
    bcm_test(NAME asio_test_asio_test_rfc2818_verification SOURCES ${CMAKE_WORKSPACE_SOURCE}/ssl/rfc2818_verification.cpp COMPILE_ONLY)
    bcm_test(NAME asio_test_asio_test_stream_base SOURCES ${CMAKE_WORKSPACE_SOURCE}/ssl/stream_base.cpp COMPILE_ONLY)
    bcm_test(NAME asio_test_asio_test_stream_service SOURCES ${CMAKE_WORKSPACE_SOURCE}/ssl/stream_service.cpp COMPILE_ONLY)
    bcm_test(NAME asio_test_asio_test_stream SOURCES ${CMAKE_WORKSPACE_SOURCE}/ssl/stream.cpp COMPILE_ONLY)
endif()


