include(BCMTest)
workspace_src (${CMAKE_CURRENT_SOURCE_DIR} CMAKE_WORKSPACE_SOURCE)


bcm_test_link_libraries(${CMAKE_WORKSPACE_NAME}_preprocessor)

#~ Copyright Rene Rivera 2008
#~ Distributed under the Boost Software License, Version 1.0.
#~ (See accompanying file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)


# HACK: Workaround broken includes
file(GLOB TEST_HEADERS RELATIVE ${CMAKE_WORKSPACE_SOURCE} ${CMAKE_WORKSPACE_SOURCE}/*.cxx *.h)
foreach(HEADER ${TEST_HEADERS} iteration.cpp)
    configure_file(${CMAKE_WORKSPACE_SOURCE}/${HEADER} ${CMAKE_CURRENT_BINARY_DIR}/include/libs/preprocessor/test/${HEADER} @ONLY)
endforeach()

add_library(preprocessor_test_settings INTERFACE)
target_include_directories(preprocessor_test_settings INTERFACE ${CMAKE_CURRENT_BINARY_DIR}/include)

bcm_test_link_libraries(preprocessor_test_settings)


bcm_test(NAME preprocessor_test_arithmetic SOURCES ${CMAKE_WORKSPACE_SOURCE}/arithmetic.cpp COMPILE_ONLY)
bcm_test(NAME preprocessor_test_array SOURCES ${CMAKE_WORKSPACE_SOURCE}/array.cpp COMPILE_ONLY)
bcm_test(NAME preprocessor_test_comparison SOURCES ${CMAKE_WORKSPACE_SOURCE}/comparison.cpp COMPILE_ONLY)
bcm_test(NAME preprocessor_test_control SOURCES ${CMAKE_WORKSPACE_SOURCE}/control.cpp COMPILE_ONLY)
bcm_test(NAME preprocessor_test_debug SOURCES ${CMAKE_WORKSPACE_SOURCE}/debug.cpp COMPILE_ONLY)
bcm_test(NAME preprocessor_test_facilities SOURCES ${CMAKE_WORKSPACE_SOURCE}/facilities.cpp COMPILE_ONLY)
bcm_test(NAME preprocessor_test_iteration SOURCES ${CMAKE_WORKSPACE_SOURCE}/iteration.cpp COMPILE_ONLY)
bcm_test(NAME preprocessor_test_list SOURCES ${CMAKE_WORKSPACE_SOURCE}/list.cpp COMPILE_ONLY)
bcm_test(NAME preprocessor_test_logical SOURCES ${CMAKE_WORKSPACE_SOURCE}/logical.cpp COMPILE_ONLY)
bcm_test(NAME preprocessor_test_punctuation SOURCES ${CMAKE_WORKSPACE_SOURCE}/punctuation.cpp COMPILE_ONLY)
bcm_test(NAME preprocessor_test_repetition SOURCES ${CMAKE_WORKSPACE_SOURCE}/repetition.cpp COMPILE_ONLY)
bcm_test(NAME preprocessor_test_selection SOURCES ${CMAKE_WORKSPACE_SOURCE}/selection.cpp COMPILE_ONLY)
bcm_test(NAME preprocessor_test_seq SOURCES ${CMAKE_WORKSPACE_SOURCE}/seq.cpp COMPILE_ONLY)
bcm_test(NAME preprocessor_test_slot SOURCES ${CMAKE_WORKSPACE_SOURCE}/slot.cpp COMPILE_ONLY)
bcm_test(NAME preprocessor_test_tuple SOURCES ${CMAKE_WORKSPACE_SOURCE}/tuple.cpp COMPILE_ONLY)
bcm_test(NAME preprocessor_test_variadic SOURCES ${CMAKE_WORKSPACE_SOURCE}/variadic.cpp COMPILE_ONLY)

bcm_test(NAME preprocessor_test_arithmetic_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/arithmetic.cpp COMPILE_ONLY)
target_compile_definitions(preprocessor_test_arithmetic_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_array_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/array.cpp COMPILE_ONLY)
target_compile_definitions(preprocessor_test_array_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_comparison_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/comparison.cpp COMPILE_ONLY)
target_compile_definitions(preprocessor_test_comparison_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_control_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/control.cpp COMPILE_ONLY)
target_compile_definitions(preprocessor_test_control_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_debug_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/debug.cpp COMPILE_ONLY)
target_compile_definitions(preprocessor_test_debug_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_facilities_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/facilities.cpp COMPILE_ONLY)
target_compile_definitions(preprocessor_test_facilities_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_iteration_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/iteration.cpp COMPILE_ONLY)
target_compile_definitions(preprocessor_test_iteration_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_list_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/list.cpp COMPILE_ONLY)
target_compile_definitions(preprocessor_test_list_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_logical_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/logical.cpp COMPILE_ONLY)
target_compile_definitions(preprocessor_test_logical_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_repetition_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/repetition.cpp COMPILE_ONLY)
target_compile_definitions(preprocessor_test_repetition_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_selection_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/selection.cpp COMPILE_ONLY)
target_compile_definitions(preprocessor_test_selection_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_seq_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/seq.cpp COMPILE_ONLY)
target_compile_definitions(preprocessor_test_seq_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_slot_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/slot.cpp COMPILE_ONLY)
target_compile_definitions(preprocessor_test_slot_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_tuple_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/tuple.cpp COMPILE_ONLY)
target_compile_definitions(preprocessor_test_tuple_nvm PUBLIC BOOST_PP_VARIADICS=0)

bcm_test(NAME preprocessor_test_arithmetic_c SOURCES ${CMAKE_WORKSPACE_SOURCE}/arithmetic.c COMPILE_ONLY)
bcm_test(NAME preprocessor_test_array_c SOURCES ${CMAKE_WORKSPACE_SOURCE}/array.c COMPILE_ONLY)
bcm_test(NAME preprocessor_test_comparison_c SOURCES ${CMAKE_WORKSPACE_SOURCE}/comparison.c COMPILE_ONLY)
bcm_test(NAME preprocessor_test_control_c SOURCES ${CMAKE_WORKSPACE_SOURCE}/control.c COMPILE_ONLY)
bcm_test(NAME preprocessor_test_debug_c SOURCES ${CMAKE_WORKSPACE_SOURCE}/debug.c COMPILE_ONLY)
bcm_test(NAME preprocessor_test_facilities_c SOURCES ${CMAKE_WORKSPACE_SOURCE}/facilities.c COMPILE_ONLY)
bcm_test(NAME preprocessor_test_list_c SOURCES ${CMAKE_WORKSPACE_SOURCE}/list.c COMPILE_ONLY)
bcm_test(NAME preprocessor_test_logical_c SOURCES ${CMAKE_WORKSPACE_SOURCE}/logical.c COMPILE_ONLY)
bcm_test(NAME preprocessor_test_punctuation_c SOURCES ${CMAKE_WORKSPACE_SOURCE}/punctuation.c COMPILE_ONLY)
bcm_test(NAME preprocessor_test_selection_c SOURCES ${CMAKE_WORKSPACE_SOURCE}/selection.c COMPILE_ONLY)
bcm_test(NAME preprocessor_test_seq_c SOURCES ${CMAKE_WORKSPACE_SOURCE}/seq.c COMPILE_ONLY)
bcm_test(NAME preprocessor_test_slot_c SOURCES ${CMAKE_WORKSPACE_SOURCE}/slot.c COMPILE_ONLY)
bcm_test(NAME preprocessor_test_tuple_c SOURCES ${CMAKE_WORKSPACE_SOURCE}/tuple.c COMPILE_ONLY)
bcm_test(NAME preprocessor_test_variadic_c SOURCES ${CMAKE_WORKSPACE_SOURCE}/variadic.c COMPILE_ONLY)

bcm_test(NAME preprocessor_test_arithmetic_c_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/arithmetic.c COMPILE_ONLY)
target_compile_definitions(preprocessor_test_arithmetic_c_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_array_c_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/array.c COMPILE_ONLY)
target_compile_definitions(preprocessor_test_array_c_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_comparison_c_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/comparison.c COMPILE_ONLY)
target_compile_definitions(preprocessor_test_comparison_c_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_control_c_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/control.c COMPILE_ONLY)
target_compile_definitions(preprocessor_test_control_c_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_debug_c_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/debug.c COMPILE_ONLY)
target_compile_definitions(preprocessor_test_debug_c_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_facilities_c_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/facilities.c COMPILE_ONLY)
target_compile_definitions(preprocessor_test_facilities_c_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_list_c_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/list.c COMPILE_ONLY)
target_compile_definitions(preprocessor_test_list_c_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_logical_c_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/logical.c COMPILE_ONLY)
target_compile_definitions(preprocessor_test_logical_c_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_selection_c_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/selection.c COMPILE_ONLY)
target_compile_definitions(preprocessor_test_selection_c_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_seq_c_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/seq.c COMPILE_ONLY)
target_compile_definitions(preprocessor_test_seq_c_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_slot_c_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/slot.c COMPILE_ONLY)
target_compile_definitions(preprocessor_test_slot_c_nvm PUBLIC BOOST_PP_VARIADICS=0)
bcm_test(NAME preprocessor_test_tuple_c_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/tuple.c COMPILE_ONLY)
target_compile_definitions(preprocessor_test_tuple_c_nvm PUBLIC BOOST_PP_VARIADICS=0)


bcm_test(NAME preprocessor_test_isempty SOURCES ${CMAKE_WORKSPACE_SOURCE}/isempty.cpp COMPILE_ONLY)
bcm_test(NAME preprocessor_test_isempty_variadic_standard_failure SOURCES ${CMAKE_WORKSPACE_SOURCE}/isempty_variadic_standard_failure.cpp COMPILE_ONLY WILL_FAIL)
bcm_test(NAME preprocessor_test_isempty_variadic_standard_failure2 SOURCES ${CMAKE_WORKSPACE_SOURCE}/isempty_variadic_standard_failure2.cpp COMPILE_ONLY WILL_FAIL)

bcm_test(NAME preprocessor_test_isempty_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/isempty.cpp COMPILE_ONLY)
target_compile_definitions(preprocessor_test_isempty_nvm PUBLIC BOOST_PP_VARIADICS=0)

bcm_test(NAME preprocessor_test_isempty_c SOURCES ${CMAKE_WORKSPACE_SOURCE}/isempty.c COMPILE_ONLY)
bcm_test(NAME preprocessor_test_isempty_variadic_standard_failure_c SOURCES ${CMAKE_WORKSPACE_SOURCE}/isempty_variadic_standard_failure.c COMPILE_ONLY WILL_FAIL)
bcm_test(NAME preprocessor_test_isempty_variadic_standard_failure2_c SOURCES ${CMAKE_WORKSPACE_SOURCE}/isempty_variadic_standard_failure2.c COMPILE_ONLY WILL_FAIL)

bcm_test(NAME preprocessor_test_isempty_c_nvm SOURCES ${CMAKE_WORKSPACE_SOURCE}/isempty.c COMPILE_ONLY)
target_compile_definitions(preprocessor_test_isempty_c_nvm PUBLIC BOOST_PP_VARIADICS=0)

# bcm_test(NAME preprocessor_test_config_info SOURCES ${CMAKE_WORKSPACE_SOURCE}/config_info.cpp)
