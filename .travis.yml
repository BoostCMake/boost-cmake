sudo: required
dist: trusty
language: cpp
script: cmake

compiler:
  - clang
  - gcc
                
before_install:
    - sudo apt-get install -y zlib1g-dev libbz2-dev mpich
    - sudo apt-get install -y python3-dev python3-pip python3-tk python3-lxml python3-six 
    - sudo apt-get install -y libssl-dev # OpenSSl
    - sudo apt-get install -y libicu-dev libc6-dev # ICU and Iconv
    - sudo apt-get install -y bsdmainutils build-essential autotools-dev automake autoconf git 
    - git clone --quiet --recurse-submodules https://github.com/boostorg/boost.git -b boost-1.58.0
    - wget https://cmake.org/files/v3.11/cmake-3.11.0-Linux-x86_64.sh
    - sudo sh cmake-3.11.0-Linux-x86_64.sh --prefix=/usr/local --exclude-subdir
         # Show compiler info
    - $CXX --version
    - which $CXX
    - $CC --version
    - which $CC
    - which cmake
    - /usr/local/bin/cmake --version
    - cmake --version

# Build steps
script:
    - mkdir build
    - cd build
    - ls ${TRAVIS_BUILD_DIR}
    - echo ${TRAVIS_BUILD_DIR}
    - ls ../boost
    - pwd
    - /usr/local/bin/cmake .. -DBUILD_WITH_SOURCES_DIR=${TRAVIS_BUILD_DIR}/boost && make -j$(nproc) all && make -j$(nproc) tests
