include(BCMTest)

find_package(${CMAKE_WORKSPACE_NAME}_assert)
find_package(${CMAKE_WORKSPACE_NAME}_array)
find_package(${CMAKE_WORKSPACE_NAME}_lambda)

cm_test_link_libraries(${CMAKE_WORKSPACE_NAME}_fusion
                       ${CMAKE_WORKSPACE_NAME}::assert
                       ${CMAKE_WORKSPACE_NAME}::array
                       ${CMAKE_WORKSPACE_NAME}::lambda
                       )

##==============================================================================
#    Copyright (c) 2003-2006 Joel de Guzman
#    Copyright (c) 2013 Mateusz Loskot
#
#   Use, modification and distribution is subject to the Boost Software
#   License, Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at
#   http://www.boost.org/LICENSE_1_0.txt)
#==============================================================================
# bring in rules for testing


cm_test(NAME fusion_test_algorithm_all SOURCES algorithm/all.cpp)
cm_test(NAME fusion_test_algorithm_any SOURCES algorithm/any.cpp)
cm_test(NAME fusion_test_algorithm_clear SOURCES algorithm/clear.cpp)
cm_test(NAME fusion_test_algorithm_copy SOURCES algorithm/copy.cpp)
cm_test(NAME fusion_test_algorithm_count SOURCES algorithm/count.cpp)
cm_test(NAME fusion_test_algorithm_count_if SOURCES algorithm/count_if.cpp)
cm_test(NAME fusion_test_algorithm_erase SOURCES algorithm/erase.cpp)
cm_test(NAME fusion_test_algorithm_erase_key SOURCES algorithm/erase_key.cpp)
cm_test(NAME fusion_test_algorithm_filter SOURCES algorithm/filter.cpp)
cm_test(NAME fusion_test_algorithm_filter_if SOURCES algorithm/filter_if.cpp)
cm_test(NAME fusion_test_algorithm_find SOURCES algorithm/find.cpp)
cm_test(NAME fusion_test_algorithm_find_if SOURCES algorithm/find_if.cpp)
cm_test(NAME fusion_test_algorithm_fold SOURCES algorithm/fold.cpp)
cm_test(NAME fusion_test_algorithm_for_each SOURCES algorithm/for_each.cpp)
cm_test(NAME fusion_test_algorithm_insert SOURCES algorithm/insert.cpp)
cm_test(NAME fusion_test_algorithm_insert_range SOURCES algorithm/insert_range.cpp)
cm_test(NAME fusion_test_algorithm_iter_fold SOURCES algorithm/iter_fold.cpp)
cm_test(NAME fusion_test_algorithm_move SOURCES algorithm/move.cpp)
cm_test(NAME fusion_test_algorithm_none SOURCES algorithm/none.cpp)
cm_test(NAME fusion_test_algorithm_pop_back SOURCES algorithm/pop_back.cpp)
cm_test(NAME fusion_test_algorithm_pop_front SOURCES algorithm/pop_front.cpp)
cm_test(NAME fusion_test_algorithm_push_back SOURCES algorithm/push_back.cpp)
cm_test(NAME fusion_test_algorithm_push_front SOURCES algorithm/push_front.cpp)
cm_test(NAME fusion_test_algorithm_remove SOURCES algorithm/remove.cpp)
cm_test(NAME fusion_test_algorithm_remove_if SOURCES algorithm/remove_if.cpp)
cm_test(NAME fusion_test_algorithm_replace SOURCES algorithm/replace.cpp)
cm_test(NAME fusion_test_algorithm_replace_if SOURCES algorithm/replace_if.cpp)
cm_test(NAME fusion_test_algorithm_reverse_fold SOURCES algorithm/reverse_fold.cpp)
cm_test(NAME fusion_test_algorithm_reverse_iter_fold SOURCES algorithm/reverse_iter_fold.cpp)
cm_test(NAME fusion_test_algorithm_reverse SOURCES algorithm/reverse.cpp)
cm_test(NAME fusion_test_algorithm_segmented_for_each SOURCES algorithm/segmented_for_each.cpp)
cm_test(NAME fusion_test_algorithm_segmented_find SOURCES algorithm/segmented_find.cpp)
cm_test(NAME fusion_test_algorithm_segmented_find_if SOURCES algorithm/segmented_find_if.cpp)
cm_test(NAME fusion_test_algorithm_segmented_fold SOURCES algorithm/segmented_fold.cpp)
cm_test(NAME fusion_test_algorithm_transform SOURCES algorithm/transform.cpp)
cm_test(NAME fusion_test_algorithm_join SOURCES algorithm/join.cpp)
cm_test(NAME fusion_test_algorithm_zip SOURCES algorithm/zip.cpp)
cm_test(NAME fusion_test_algorithm_zip2 SOURCES algorithm/zip2.cpp)
cm_test(NAME fusion_test_algorithm_zip_ignore SOURCES algorithm/zip_ignore.cpp)
cm_test(NAME fusion_test_algorithm_flatten SOURCES algorithm/flatten.cpp)

cm_test(NAME fusion_test_sequence_as_deque SOURCES sequence/as_deque.cpp)
cm_test(NAME fusion_test_sequence_as_list SOURCES sequence/as_list.cpp)
cm_test(NAME fusion_test_sequence_as_map SOURCES sequence/as_map.cpp)
cm_test(NAME fusion_test_sequence_as_map_assoc SOURCES sequence/as_map_assoc.cpp)
cm_test(NAME fusion_test_sequence_as_set SOURCES sequence/as_set.cpp)
cm_test(NAME fusion_test_sequence_as_vector SOURCES sequence/as_vector.cpp)
cm_test(NAME fusion_test_sequence_${CMAKE_WORKSPACE_NAME}_tuple SOURCES sequence/${CMAKE_WORKSPACE_NAME}_tuple.cpp)
cm_test(NAME fusion_test_sequence_${CMAKE_WORKSPACE_NAME}_tuple_iterator SOURCES sequence/${CMAKE_WORKSPACE_NAME}_tuple_iterator.cpp)
cm_test(NAME fusion_test_sequence_cons SOURCES sequence/cons.cpp)
# cm_test(NAME fusion_test_sequence_convert_${CMAKE_WORKSPACE_NAME}_tuple SOURCES sequence/convert_${CMAKE_WORKSPACE_NAME}_tuple.cpp)
# cm_test(NAME fusion_test_sequence_convert_deque SOURCES sequence/convert_deque.cpp)
# cm_test(NAME fusion_test_sequence_convert_list SOURCES sequence/convert_list.cpp)
# cm_test(NAME fusion_test_sequence_convert_std_pair SOURCES sequence/convert_std_pair.cpp)
# cm_test(NAME fusion_test_sequence_convert_std_tuple SOURCES sequence/convert_std_tuple.cpp)
# cm_test(NAME fusion_test_sequence_convert_vector SOURCES sequence/convert_vector.cpp)
cm_test(NAME fusion_test_sequence_filter_view SOURCES sequence/filter_view.cpp)
cm_test(NAME fusion_test_sequence_hash SOURCES sequence/hash.cpp)
cm_test(NAME fusion_test_sequence_io SOURCES sequence/io.cpp)
cm_test(NAME fusion_test_sequence_iterator_range SOURCES sequence/iterator_range.cpp)
cm_test(NAME fusion_test_sequence_joint_view SOURCES sequence/joint_view.cpp)
cm_test(NAME fusion_test_sequence_list_comparison SOURCES sequence/list_comparison.cpp)
cm_test(NAME fusion_test_sequence_list_construction SOURCES sequence/list_construction.cpp)
cm_test(NAME fusion_test_sequence_list_copy SOURCES sequence/list_copy.cpp)
cm_test(NAME fusion_test_sequence_list_iterator SOURCES sequence/list_iterator.cpp)
cm_test(NAME fusion_test_sequence_list_hash SOURCES sequence/list_hash.cpp)
cm_test(NAME fusion_test_sequence_list_make SOURCES sequence/list_make.cpp)
cm_test(NAME fusion_test_sequence_list_misc SOURCES sequence/list_misc.cpp)
cm_test(NAME fusion_test_sequence_list_mutate SOURCES sequence/list_mutate.cpp)
# cm_test(NAME fusion_test_sequence_list_nest SOURCES sequence/list_nest.cpp)
cm_test(NAME fusion_test_sequence_list_tie SOURCES sequence/list_tie.cpp)
cm_test(NAME fusion_test_sequence_list_value_at SOURCES sequence/list_value_at.cpp)
cm_test(NAME fusion_test_sequence_deque_comparison SOURCES sequence/deque_comparison.cpp)
cm_test(NAME fusion_test_sequence_deque_construction SOURCES sequence/deque_construction.cpp)
cm_test(NAME fusion_test_sequence_deque_copy SOURCES sequence/deque_copy.cpp)
cm_test(NAME fusion_test_sequence_deque_iterator SOURCES sequence/deque_iterator.cpp)
cm_test(NAME fusion_test_sequence_deque_hash SOURCES sequence/deque_hash.cpp)
# cm_test(NAME fusion_test_sequence_deque_is_constructible SOURCES sequence/deque_is_constructible.cpp COMPILE_ONLY)
cm_test(NAME fusion_test_sequence_deque_make SOURCES sequence/deque_make.cpp)
cm_test(NAME fusion_test_sequence_deque_misc SOURCES sequence/deque_misc.cpp)
cm_test(NAME fusion_test_sequence_deque_move SOURCES sequence/deque_move.cpp)
cm_test(NAME fusion_test_sequence_deque_mutate SOURCES sequence/deque_mutate.cpp)
# cm_test(NAME fusion_test_sequence_deque_nest SOURCES sequence/deque_nest.cpp)
cm_test(NAME fusion_test_sequence_deque_tie SOURCES sequence/deque_tie.cpp)
cm_test(NAME fusion_test_sequence_deque_value_at SOURCES sequence/deque_value_at.cpp)
cm_test(NAME fusion_test_sequence_front_extended_deque SOURCES sequence/front_extended_deque.cpp)
cm_test(NAME fusion_test_sequence_back_extended_deque SOURCES sequence/back_extended_deque.cpp)
cm_test(NAME fusion_test_sequence_make_list SOURCES sequence/make_list.cpp)
cm_test(NAME fusion_test_sequence_make_vector SOURCES sequence/make_vector.cpp)
cm_test(NAME fusion_test_sequence_map SOURCES sequence/map.cpp)
cm_test(NAME fusion_test_sequence_map_comparison SOURCES sequence/map_comparison.cpp)
cm_test(NAME fusion_test_sequence_map_construction SOURCES sequence/map_construction.cpp)
cm_test(NAME fusion_test_sequence_map_copy SOURCES sequence/map_copy.cpp)
cm_test(NAME fusion_test_sequence_map_misc SOURCES sequence/map_misc.cpp)
cm_test(NAME fusion_test_sequence_map_move SOURCES sequence/map_move.cpp)
cm_test(NAME fusion_test_sequence_map_mutate SOURCES sequence/map_mutate.cpp)
cm_test(NAME fusion_test_sequence_map_tie SOURCES sequence/map_tie.cpp)
cm_test(NAME fusion_test_sequence_nil SOURCES sequence/nil.cpp)
cm_test(NAME fusion_test_sequence_nview SOURCES sequence/nview.cpp)
cm_test(NAME fusion_test_sequence_reverse_view SOURCES sequence/reverse_view.cpp)
cm_test(NAME fusion_test_sequence_segmented_iterator_range SOURCES sequence/segmented_iterator_range.cpp)
cm_test(NAME fusion_test_sequence_set SOURCES sequence/set.cpp)
cm_test(NAME fusion_test_sequence_single_view SOURCES sequence/single_view.cpp)
cm_test(NAME fusion_test_sequence_std_pair SOURCES sequence/std_pair.cpp)
cm_test(NAME fusion_test_sequence_${CMAKE_WORKSPACE_NAME}_array SOURCES sequence/${CMAKE_WORKSPACE_NAME}_array.cpp)
cm_test(NAME fusion_test_sequence_array SOURCES sequence/array.cpp)
# cm_test(NAME fusion_test_sequence_std_array SOURCES sequence/std_array.cpp)
cm_test(NAME fusion_test_sequence_tuple_comparison SOURCES sequence/tuple_comparison.cpp)
cm_test(NAME fusion_test_sequence_tuple_construction SOURCES sequence/tuple_construction.cpp)
# cm_test(NAME fusion_test_sequence_tuple_conversion SOURCES sequence/tuple_conversion.cpp)
cm_test(NAME fusion_test_sequence_tuple_copy SOURCES sequence/tuple_copy.cpp)
cm_test(NAME fusion_test_sequence_tuple_element SOURCES sequence/tuple_element.cpp)
cm_test(NAME fusion_test_sequence_tuple_make SOURCES sequence/tuple_make.cpp)
cm_test(NAME fusion_test_sequence_tuple_misc SOURCES sequence/tuple_misc.cpp)
cm_test(NAME fusion_test_sequence_tuple_mutate SOURCES sequence/tuple_mutate.cpp)
# cm_test(NAME fusion_test_sequence_tuple_nest SOURCES sequence/tuple_nest.cpp)
cm_test(NAME fusion_test_sequence_tuple_hash SOURCES sequence/tuple_hash.cpp)
cm_test(NAME fusion_test_sequence_tuple_tie SOURCES sequence/tuple_tie.cpp)
# cm_test(NAME fusion_test_sequence_tuple_traits_maybe_variadic_tuple SOURCES sequence/tuple_traits.cpp)

# cm_test(NAME fusion_test_sequence_tuple_traits_no_variadic_tuple SOURCES sequence/tuple_traits.cpp)
#target_compile_definitions(sequence_tuple_traits_no_variadic_tuple PUBLIC BOOST_FUSION_DISABLE_VARIADIC_VECTOR)

cm_test(NAME fusion_test_sequence_transform_view SOURCES sequence/transform_view.cpp)
cm_test(NAME fusion_test_sequence_vector_comparison SOURCES sequence/vector_comparison.cpp)
cm_test(NAME fusion_test_sequence_vector_construction SOURCES sequence/vector_construction.cpp)
# cm_test(NAME fusion_test_sequence_vector_conversion SOURCES sequence/vector_conversion.cpp)
cm_test(NAME fusion_test_sequence_vector_copy SOURCES sequence/vector_copy.cpp)
cm_test(NAME fusion_test_sequence_vector_iterator SOURCES sequence/vector_iterator.cpp)
cm_test(NAME fusion_test_sequence_vector_make SOURCES sequence/vector_make.cpp)
cm_test(NAME fusion_test_sequence_vector_misc SOURCES sequence/vector_misc.cpp)
cm_test(NAME fusion_test_sequence_vector_move SOURCES sequence/vector_move.cpp)
cm_test(NAME fusion_test_sequence_vector_mutate SOURCES sequence/vector_mutate.cpp)
cm_test(NAME fusion_test_sequence_vector_n SOURCES sequence/vector_n.cpp)
# cm_test(NAME fusion_test_sequence_vector_nest SOURCES sequence/vector_nest.cpp)
cm_test(NAME fusion_test_sequence_vector_hash SOURCES sequence/vector_hash.cpp)
cm_test(NAME fusion_test_sequence_vector_tie SOURCES sequence/vector_tie.cpp)
# cm_test(NAME fusion_test_sequence_vector_traits_maybe_variadic_vector SOURCES sequence/vector_traits.cpp)

# cm_test(NAME fusion_test_sequence_vector_traits_no_variadic_vector SOURCES sequence/vector_traits.cpp)
# target_compile_definitions(sequence_vector_traits_no_variadic_vector PUBLIC BOOST_FUSION_DISABLE_VARIADIC_VECTOR)

cm_test(NAME fusion_test_sequence_vector_value_at SOURCES sequence/vector_value_at.cpp)
cm_test(NAME fusion_test_sequence_zip_view SOURCES sequence/zip_view.cpp)
cm_test(NAME fusion_test_sequence_zip_view2 SOURCES sequence/zip_view2.cpp)
cm_test(NAME fusion_test_sequence_zip_view_ignore SOURCES sequence/zip_view_ignore.cpp)
cm_test(NAME fusion_test_sequence_repetitive_view SOURCES sequence/repetitive_view.cpp)
cm_test(NAME fusion_test_sequence_deduce_sequence SOURCES sequence/deduce_sequence.cpp)
cm_test(NAME fusion_test_sequence_adapt_adt_named SOURCES sequence/adapt_adt_named.cpp)
# cm_test(NAME fusion_test_sequence_adapt_adt_named_empty SOURCES sequence/adapt_adt_named_empty.cpp)
cm_test(NAME fusion_test_sequence_adapt_adt SOURCES sequence/adapt_adt.cpp)
# cm_test(NAME fusion_test_sequence_adapt_adt_empty SOURCES sequence/adapt_adt_empty.cpp)
cm_test(NAME fusion_test_sequence_adapt_assoc_adt_named SOURCES sequence/adapt_assoc_adt_named.cpp)
# cm_test(NAME fusion_test_sequence_adapt_assoc_adt_named_empty SOURCES sequence/adapt_assoc_adt_named_empty.cpp)
cm_test(NAME fusion_test_sequence_adapt_assoc_adt SOURCES sequence/adapt_assoc_adt.cpp)
# cm_test(NAME fusion_test_sequence_adapt_assoc_adt_empty SOURCES sequence/adapt_assoc_adt_empty.cpp)
cm_test(NAME fusion_test_sequence_adapt_assoc_struct_named SOURCES sequence/adapt_assoc_struct_named.cpp)
# cm_test(NAME fusion_test_sequence_adapt_assoc_struct_named_empty SOURCES sequence/adapt_assoc_struct_named_empty.cpp)
cm_test(NAME fusion_test_sequence_adapt_assoc_struct SOURCES sequence/adapt_assoc_struct.cpp)
# cm_test(NAME fusion_test_sequence_adapt_assoc_struct_empty SOURCES sequence/adapt_assoc_struct_empty.cpp)
cm_test(NAME fusion_test_sequence_adapt_assoc_tpl_adt SOURCES sequence/adapt_assoc_tpl_adt.cpp)
# cm_test(NAME fusion_test_sequence_adapt_assoc_tpl_adt_empty SOURCES sequence/adapt_assoc_tpl_adt_empty.cpp)
cm_test(NAME fusion_test_sequence_adapt_assoc_tpl_struct SOURCES sequence/adapt_assoc_tpl_struct.cpp)
# cm_test(NAME fusion_test_sequence_adapt_assoc_tpl_struct_empty SOURCES sequence/adapt_assoc_tpl_struct_empty.cpp)
cm_test(NAME fusion_test_sequence_adapt_struct_named SOURCES sequence/adapt_struct_named.cpp)
# cm_test(NAME fusion_test_sequence_adapt_struct_named_empty SOURCES sequence/adapt_struct_named_empty.cpp)
cm_test(NAME fusion_test_sequence_adapt_struct SOURCES sequence/adapt_struct.cpp)
# cm_test(NAME fusion_test_sequence_adapt_struct_empty SOURCES sequence/adapt_struct_empty.cpp)
cm_test(NAME fusion_test_sequence_adapt_tpl_adt SOURCES sequence/adapt_tpl_adt.cpp)
# cm_test(NAME fusion_test_sequence_adapt_tpl_adt_empty SOURCES sequence/adapt_tpl_adt_empty.cpp)
cm_test(NAME fusion_test_sequence_adapt_tpl_struct SOURCES sequence/adapt_tpl_struct.cpp)
# cm_test(NAME fusion_test_sequence_adapt_tpl_struct_empty SOURCES sequence/adapt_tpl_struct_empty.cpp)
cm_test(NAME fusion_test_sequence_adt_attribute_proxy SOURCES sequence/adt_attribute_proxy.cpp)
cm_test(NAME fusion_test_sequence_define_struct SOURCES sequence/define_struct.cpp)
# cm_test(NAME fusion_test_sequence_define_struct_empty SOURCES sequence/define_struct_empty.cpp)
# cm_test(NAME fusion_test_sequence_define_struct_move SOURCES sequence/define_struct_move.cpp)
cm_test(NAME fusion_test_sequence_define_struct_inline SOURCES sequence/define_struct_inline.cpp)
# cm_test(NAME fusion_test_sequence_define_struct_inline_empty SOURCES sequence/define_struct_inline_empty.cpp)
# cm_test(NAME fusion_test_sequence_define_struct_inline_move SOURCES sequence/define_struct_inline_move.cpp)
cm_test(NAME fusion_test_sequence_define_assoc_struct SOURCES sequence/define_assoc_struct.cpp)
# cm_test(NAME fusion_test_sequence_define_assoc_struct_empty SOURCES sequence/define_assoc_struct_empty.cpp)
# cm_test(NAME fusion_test_sequence_define_assoc_struct_move SOURCES sequence/define_assoc_struct_move.cpp)
cm_test(NAME fusion_test_sequence_define_tpl_struct SOURCES sequence/define_tpl_struct.cpp)
# cm_test(NAME fusion_test_sequence_define_tpl_struct_empty SOURCES sequence/define_tpl_struct_empty.cpp)
# cm_test(NAME fusion_test_sequence_define_tpl_struct_move SOURCES sequence/define_tpl_struct_move.cpp)
cm_test(NAME fusion_test_sequence_define_tpl_struct_inline SOURCES sequence/define_tpl_struct_inline.cpp)
# cm_test(NAME fusion_test_sequence_define_tpl_struct_inline_empty SOURCES sequence/define_tpl_struct_inline_empty.cpp)
# cm_test(NAME fusion_test_sequence_define_tpl_struct_inline_move SOURCES sequence/define_tpl_struct_inline_move.cpp)
cm_test(NAME fusion_test_sequence_define_assoc_tpl_struct SOURCES sequence/define_assoc_tpl_struct.cpp)
# cm_test(NAME fusion_test_sequence_define_assoc_tpl_struct_empty SOURCES sequence/define_assoc_tpl_struct_empty.cpp)
# cm_test(NAME fusion_test_sequence_define_assoc_tpl_struct_move SOURCES sequence/define_assoc_tpl_struct_move.cpp)
cm_test(NAME fusion_test_sequence_std_tuple SOURCES sequence/std_tuple.cpp)
cm_test(NAME fusion_test_sequence_std_tuple_iterator SOURCES sequence/std_tuple_iterator.cpp)
cm_test(NAME fusion_test_sequence_ref_vector SOURCES sequence/ref_vector.cpp)
cm_test(NAME fusion_test_sequence_flatten_view SOURCES sequence/flatten_view.cpp)

cm_test(NAME fusion_test_sequence_size SOURCES sequence/size.cpp COMPILE_ONLY)

cm_test(NAME fusion_test_functional_fused SOURCES functional/fused.cpp)
cm_test(NAME fusion_test_functional_fused_function_object SOURCES functional/fused_function_object.cpp)
cm_test(NAME fusion_test_functional_fused_procedure SOURCES functional/fused_procedure.cpp)
cm_test(NAME fusion_test_functional_unfused SOURCES functional/unfused.cpp)
cm_test(NAME fusion_test_functional_unfused_typed SOURCES functional/unfused_typed.cpp)
cm_test(NAME fusion_test_functional_make_fused SOURCES functional/make_fused.cpp)
cm_test(NAME fusion_test_functional_make_fused_function_object SOURCES functional/make_fused_function_object.cpp)
cm_test(NAME fusion_test_functional_make_fused_procedure SOURCES functional/make_fused_procedure.cpp)
cm_test(NAME fusion_test_functional_make_unfused SOURCES functional/make_unfused.cpp)
cm_test(NAME fusion_test_functional_invoke SOURCES functional/invoke.cpp)
cm_test(NAME fusion_test_functional_invoke_function_object SOURCES functional/invoke_function_object.cpp)
cm_test(NAME fusion_test_functional_invoke_procedure SOURCES functional/invoke_procedure.cpp)
cm_test(NAME fusion_test_sequence_swap SOURCES sequence/swap.cpp)

cm_test(NAME fusion_test_support_pair_deque SOURCES support/pair_deque.cpp COMPILE_ONLY)
cm_test(NAME fusion_test_support_pair_list SOURCES support/pair_list.cpp COMPILE_ONLY)
cm_test(NAME fusion_test_support_pair_map SOURCES support/pair_map.cpp COMPILE_ONLY)
cm_test(NAME fusion_test_support_pair_set SOURCES support/pair_set.cpp COMPILE_ONLY)
cm_test(NAME fusion_test_support_pair_vector SOURCES support/pair_vector.cpp COMPILE_ONLY)
# cm_test(NAME fusion_test_support_pair_nest SOURCES support/pair_nest.cpp COMPILE_ONLY)
# cm_test(NAME fusion_test_support_index_sequence SOURCES support/index_sequence.cpp COMPILE_ONLY)
# cm_test(NAME fusion_test_support_and SOURCES support/and.cpp COMPILE_ONLY)

#   [ compile-fail xxx.cpp :  :  :  :  ]
